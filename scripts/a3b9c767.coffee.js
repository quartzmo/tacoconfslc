(function(){window.config={api_host:"tacoconfslc-api.herokuapp.com"}}).call(this),function(){var a,b,c,d,e;$.fn.serializeObject=function(){var a,b;return b={},a=this.serializeArray(),$.each(a,function(){return b[this.name]?(b[this.name].push||(b[this.name]=[b[this.name]]),b[this.name].push(this.value||"")):b[this.name]=this.value||""}),b},$.fn.clearInputs=function(){var a;return a=this.serializeArray(),$.each(a,function(){return this.value=""}),$(this)},c=Backbone.Model.extend({validate:function(a){var b,c;return c=[],b=/^([^@\s]+)@((?:[-a-z0-9]+\.)+[a-z]{2,})$/i,a.name||c.push("name can't be blank"),a.email.match(b)||c.push("email doesn't seem to be a real email"),c.length>0?c:null}}),window.Subscribers=d=Backbone.Collection.extend({model:c,url:"http://"+window.config.api_host+"/subscribers"}),a=Backbone.View.extend({el:".avatars",initialize:function(){return this.listenTo(this.collection,"add",this.addSubscriber)},addSubscriber:function(a){var c;return c=new b({model:a}),this.$el.append(c.render().el),!0}}),b=Backbone.View.extend({className:"avatar",template:_.template("<img title=\"<%= get('name') %>\" alt=\"<%= get('name') %>\" src=\"http://2.gravatar.com/avatar/<%= get('email_hash') %>\">\n<div class=\"avatar-name\"><%= get('name') %></div>"),render:function(){return this.$el.html(this.template(this.model)),this}}),window.subscribers=e=new d,$(function(){var b;return window.indexView=b=new a({collection:e}),e.fetch(),$('form button[type="submit"]').bind("click",function(a){var b,d;return a.preventDefault(),b=$(this).parent("form").serializeObject(),d=new c(b),d.on("invalid",function(a,b){return $(".subscriber-errors").show().html(b.join(", "))}),e.create(d,{wait:!0,success:function(){return $(":input","form").val(""),$(".subscriber-errors").show().html("Success!")},error:function(a,b){var c,d;return console.log(b),c=JSON.parse(b.responseText).error,d=11e3===c?"Email has already been submitted.":"There was an unknown error.",$(".subscriber-errors").show().html(d)}})})})}.call(this);